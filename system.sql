/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                                        CREATE TABLES
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */

/* NOT DEPENDING TABLES */

CREATE TABLE REFEREE (
    DNI_REFEREE VARCHAR2(9) PRIMARY KEY,
    NAME_ CHAR(50) NOT NULL,
    LAST_NAME CHAR(100) NOT NULL,
    PHONE VARCHAR(12) NOT NULL CHECK (PHONE LIKE '+%'),
    EMAIL CHAR(80) NOT NULL CHECK (EMAIL LIKE '%@%')
);


CREATE TABLE COURT (
    COURT_NUMBER NUMBER(2) PRIMARY KEY,
    NAME_ CHAR(30) NOT NULL,
    CAPACITY_ NUMBER(4) NOT NULL
);


CREATE TABLE EDITION_(
    EDITION_CODE NUMBER(4) PRIMARY KEY,
    START_DATE DATE NOT NULL,
    END_DATE DATE
);


CREATE TABLE EMPLOYEE (
    DNI VARCHAR(8) PRIMARY KEY,
    NAME_ CHAR(50) NOT NULL,
    LAST_NAME CHAR(100) NOT NULL,
    PHONE VARCHAR(12) NOT NULL CHECK(PHONE LIKE '+%'),
    EMAIL CHAR(80) NOT NULL CHECK(EMAIL LIKE '%@%')
);


CREATE TABLE COMPANY (
    CIF VARCHAR2(9) PRIMARY KEY,
    EMAIL CHAR(80) NOT NULL CHECK (EMAIL LIKE '%@%'),
    PHONE VARCHAR(12) NOT NULL CHECK (PHONE LIKE '+%'),
    COMPANY_NAME CHAR(50) NOT NULL,
    CONTACT_NAME CHAR(100) NOT NULL
);


CREATE TABLE PLAYER (
    DNI VARCHAR2(9) PRIMARY KEY,
    NAME_ CHAR(50) NOT NULL,
    LAST_NAME CHAR(100) NOT NULL,
    BIRTH_DATE DATE NOT NULL,
    GENDER CHAR(1) NOT NULL CHECK (GENDER IN ('M', 'F'))
);


CREATE TABLE COACH(
    DNI_COACH VARCHAR2(9) PRIMARY KEY,
    NAME_ CHAR(50) NOT NULL,
    LAST_NAME CHAR(100) NOT NULL,
    BIRTH_DATE DATE NOT NULL,
    GENDER CHAR(1) NOT NULL CHECK(GENDER IN('M', 'F'))
);


/* TABLES THAT DEPEND ON OTHERS */

CREATE TABLE OFFER(
    CODE NUMBER(4),
    DNI_REFEREE VARCHAR(9),
    STATUS CHAR(9) NOT NULL,
    DATE_ DATE NOT NULL,
    EDITION_CODE NUMBER(4),
    PRIMARY KEY(CODE),
    FOREIGN KEY(EDITION_CODE) REFERENCES EDITION_(EDITION_CODE),
    FOREIGN KEY(DNI_REFEREE) REFERENCES REFEREE(DNI_REFEREE)
);


CREATE TABLE MATCH_(
    MATCH_CODE NUMBER(4),
    DNI_REFEREE VARCHAR(9),
    COURT_NUMBER NUMBER(2),
    EDITION_CODE NUMBER(4),
    DATE_ DATE NOT NULL,
    PRIMARY KEY(MATCH_CODE),
    FOREIGN KEY(DNI_REFEREE) REFERENCES REFEREE(DNI_REFEREE),
    FOREIGN KEY(COURT_NUMBER) REFERENCES COURT(COURT_NUMBER),
    FOREIGN KEY(EDITION_CODE) REFERENCES EDITION_(EDITION_CODE)
);





CREATE TABLE PARTICIPATES (
    DNI VARCHAR(8),
    EDITION_CODE NUMBER(4),
    SALARY NUMBER(6) NOT NULL,
    PRIMARY KEY(DNI, EDITION_CODE, SALARY),
    FOREIGN KEY (DNI) REFERENCES EMPLOYEE(DNI),
    FOREIGN KEY (EDITION_CODE) REFERENCES EDITION_(EDITION_CODE)
);


CREATE TABLE WORKS (
    DNI VARCHAR(8),
    EDITION_CODE NUMBER(4),
    COURT_NUMBER NUMBER(2),
    START_DATE DATE,
    END_DATE DATE,
    PRIMARY KEY(DNI, START_DATE, END_DATE, COURT_NUMBER, EDITION_CODE),
    FOREIGN KEY (DNI) REFERENCES EMPLOYEE(DNI),
    FOREIGN KEY (EDITION_CODE) REFERENCES EDITION_(EDITION_CODE),
    FOREIGN KEY (COURT_NUMBER) REFERENCES COURT(COURT_NUMBER)
);



CREATE TABLE COLLABORATES (
    CIF VARCHAR2(9),
    EDITION_CODE NUMBER(4),
    CONTRIBUTED_MONEY NUMBER(7) NOT NULL,
    PRIMARY KEY (CIF, EDITION_CODE),
    FOREIGN KEY (CIF) REFERENCES COMPANY(CIF),
    FOREIGN KEY (EDITION_CODE) REFERENCES EDITION_(EDITION_CODE)
);

CREATE TABLE MATERIAL(
    MATERIAL_CODE NUMBER(4),
    MATERIAL_NAME VARCHAR2(50) NOT NULL,
    MATERIAL_QUANTITY NUMBER(3) NOT NULL,
    CIF VARCHAR2(9) NOT NULL,
    EDITION_CODE NUMBER(4) NOT NULL,
    PRIMARY KEY (MATERIAL_CODE),
    FOREIGN KEY (CIF, EDITION_CODE) REFERENCES COLLABORATES (CIF, EDITION_CODE)
);




CREATE TABLE TOGETHER(
    DNI1 REFERENCES PLAYER(DNI),
    DNI2 REFERENCES PLAYER(DNI),
    PRIMARY KEY(DNI1, DNI2)
);


CREATE TABLE BELONGS(
    DNI1 VARCHAR2(9),
    DNI2 VARCHAR2(9),
    EDITION_CODE REFERENCES EDITION_(EDITION_CODE),
    DNI_COACH REFERENCES COACH(DNI_COACH),
    SCORE NUMBER(4),
    FOREIGN KEY(DNI1, DNI2) REFERENCES TOGETHER(DNI1, DNI2),
    PRIMARY KEY(DNI1, DNI2, EDITION_CODE)
);


CREATE TABLE PLAYS(
    DNI1 VARCHAR(9),
    DNI2 VARCHAR(9),
    EDITION_CODE NUMBER(4),
    MATCH_CODE NUMBER(4),
    PRIMARY KEY(DNI1, DNI2, EDITION_CODE, MATCH_CODE),
    FOREIGN KEY(DNI1, DNI2, EDITION_CODE) REFERENCES BELONGS(DNI1, DNI2, EDITION_CODE),
    FOREIGN KEY(MATCH_CODE) REFERENCES MATCH_(MATCH_CODE)
);





/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                                       TABLES VALUES
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */

INSERT INTO REFEREE VALUES('26525110Z', 'CARLOS', 'FERNANDEZ', '+34644879675', 'CARLOSFERNANDEZ@GMAIL.COM');
INSERT INTO REFEREE VALUES('26525131A', 'LUIS', 'CARRILLO', '+34644879753', 'LUISCARRILLO@GMAIL.COM');
INSERT INTO REFEREE VALUES('26525112B', 'MARIA', 'LOPEZ', '+34644879951', 'MARIALOPEZ@GMAIL.COM');
INSERT INTO REFEREE VALUES('26525113C', 'LUISA', 'MOYA', '+34644879456', 'LUISAMOYA@GMAIL.COM');
INSERT INTO REFEREE VALUES('26525114D', 'VICTORIA', 'JIMENEZ', '+34644879425', 'VICTORIAJIMENEZ@GMAIL.COM');
INSERT INTO REFEREE VALUES('26525115E', 'FERNANDO', 'SANCHEZ', '+34644879852', 'FERNANDOSANCHEZ@GMAIL.COM');
INSERT INTO REFEREE VALUES('26525116F', 'PILAR', 'GAMEZ', '+34644879000', 'PILARGAMEZ@GMAIL.COM');
INSERT INTO REFEREE VALUES('26525117G', 'PEDRO', 'MARINO', '+34644879111', 'PEDROMARINO@GMAIL.COM');



INSERT INTO COURT VALUES('01', 'SANTIAGO BERNAB�U', '9999');
INSERT INTO COURT VALUES('02', 'OLIVO ARENA', '3000');
INSERT INTO COURT VALUES('03', 'NUEVO LOS CARMENES', '4561');
INSERT INTO COURT VALUES('04', 'CAMP NOU', '6666');
INSERT INTO COURT VALUES('05', 'PARQUE DE LOS PR�NCIPES', '7777');

INSERT INTO EDITION_ VALUES('0001', '01/01/19', '31/12/19');
INSERT INTO EDITION_ VALUES('0002', '01/01/20', '31/12/20');
INSERT INTO EDITION_ VALUES('0003', '01/01/21', '31/12/21');
INSERT INTO EDITION_ VALUES('0004', '01/01/22', '31/12/22');

INSERT INTO MATCH_ VALUES('001', '26525110Z', '01', '0001', '01/01/19');
INSERT INTO MATCH_ VALUES('002', '26525131A', '05', '0001', '01/01/19');
INSERT INTO MATCH_ VALUES('003', '26525131A', '02', '0001', '02/01/19');
INSERT INTO MATCH_ VALUES('004', '26525112B', '03', '0001', '03/01/19');
INSERT INTO MATCH_ VALUES('005', '26525113C', '04', '0001', '04/01/19');
INSERT INTO MATCH_ VALUES('006', '26525113C', '04', '0001', '01/01/19');

INSERT INTO PLAYER VALUES('11111111A', 'JOSE', 'MARTINEZ', TO_DATE('05/05/1803', 'dd/mm/yyyy'), 'M');
INSERT INTO PLAYER VALUES('11111111B', 'JOSEFA', 'MARTINEZ', TO_DATE('05/05/1803', 'dd/mm/yyyy'), 'F');
INSERT INTO PLAYER VALUES('11111111C', 'JOSEMA', 'MARTINEZ', TO_DATE('05/05/1803', 'dd/mm/yyyy'), 'M');
INSERT INTO PLAYER VALUES('11111111D', 'MARIA', 'MARTINEZ', TO_DATE('05/05/1803', 'dd/mm/yyyy'), 'F');
INSERT INTO PLAYER VALUES('11111111E', 'MARIO', 'MARTINEZ', TO_DATE('05/05/1803', 'dd/mm/yyyy'), 'M');

INSERT INTO TOGETHER VALUES('11111111A', '11111111B');
INSERT INTO TOGETHER VALUES('11111111D', '11111111E');

INSERT INTO COACH VALUES('11111112C', 'JOSEMI', 'MARTINEZ', TO_DATE('05/05/1803', 'dd/mm/yyyy'), 'M');
INSERT INTO COACH VALUES('11111112F', 'ALBERTO', 'MARTINEZ', TO_DATE('05/05/1803', 'dd/mm/yyyy'), 'M');

INSERT INTO BELONGS VALUES('11111111A', '11111111B', '0001', '11111112C', '11');
INSERT INTO BELONGS VALUES('11111111D', '11111111E', '0001', '11111112F', '11');

INSERT INTO PLAYS VALUES('11111111A', '11111111B', '0001', '001');

INSERT INTO COMPANY VALUES ('A1234567A', 'EMPRESA1@GMAIL.COM', '+34956123456', 'EMPRESA1', 'JUAN');
INSERT INTO COMPANY VALUES ('A1234567B', 'EMPRESA2@GMAIL.COM', '+34956123457', 'EMPRESA2', 'ANTONIA');
INSERT INTO COMPANY VALUES ('A1234567C', 'EMPRESA2@GMAIL.COM', '+34956123458', 'EMPRESA2', 'MARIA');

INSERT INTO COLLABORATES VALUES ('A1234567A', '0001', '123456');
INSERT INTO COLLABORATES VALUES ('A1234567B', '0001', '102345');

INSERT INTO EDITION_ VALUES('11', '01/01/19','01/02/19');

INSERT INTO COURT VALUES('22', 'NADAL', '100');   

INSERT INTO EMPLOYEE VALUES('2625116F', 'PILAR', 'GAMEZ', '+34644879000', 'PILARGAMEZ@GMAIL.COM');
INSERT INTO EMPLOYEE VALUES('1111111F', 'JUAN', 'GAMEZ', '+34644879000', 'JUANGAMEZ@GMAIL.COM');
INSERT INTO EMPLOYEE VALUES('2222222F', 'CARLOS', 'GAMEZ', '+34644879000', 'CARLOSGAMEZ@GMAIL.COM');
INSERT INTO EMPLOYEE VALUES('3333333F', 'ALBERTO', 'GAMEZ', '+34654879000', 'ALBERTOGAMEZ@GMAIL.COM');

INSERT INTO PARTICIPATES VALUES('2625116F', '0001', '5555');  
INSERT INTO PARTICIPATES VALUES('1111111F', '0001', '5555'); 
INSERT INTO PARTICIPATES VALUES('2222222F', '0001', '5555'); 
INSERT INTO PARTICIPATES VALUES('3333333F', '11', '5555'); 

INSERT INTO WORKS VALUES('2625116F', '0001', '22', TO_DATE('02/02/19 06:00:00','DD/MM/YY HH24:MI:SS'), TO_DATE('02/02/19 09:24:52','DD/MM/YY HH24:MI:SS'));
INSERT INTO WORKS VALUES('1111111F', '0001', '22', TO_DATE('04/02/19 06:00:00','DD/MM/YY HH24:MI:SS'), TO_DATE('04/02/19 09:24:52','DD/MM/YY HH24:MI:SS'));
INSERT INTO WORKS VALUES('2222222F', '0001', '22', TO_DATE('03/02/19 06:00:00','DD/MM/YY HH24:MI:SS'), TO_DATE('03/02/19 14:37:42','DD/MM/YY HH24:MI:SS'));
INSERT INTO WORKS VALUES('3333333F', '0001', '22', TO_DATE('27/12/22 15:00:00','DD/MM/YY HH24:MI:SS'), TO_DATE('27/12/22 20:37:42','DD/MM/YY HH24:MI:SS'));





commit;


/* DROP TABLES*/

DROP TABLE PLAYS;
DROP TABLE BELONGS;
DROP TABLE TOGETHER;
DROP TABLE COACH;
DROP TABLE PLAYER;
DROP TABLE WORKS;
DROP TABLE PARTICIPATES;
DROP TABLE EMPLOYEE;
DROP TABLE MATERIAL;
DROP TABLE MATCH_;
DROP TABLE OFFER;
DROP TABLE COURT;
DROP TABLE REFEREE;
DROP TABLE COLLABORATES;
DROP TABLE COMPANY;
DROP TABLE EDITION_;